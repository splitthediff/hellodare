/* ======================================== */
/*       REVISED CSS WITH VARIABLES         */
/* ======================================== */

/* Universal reset */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

/* Body and html reset */
html, body {
  height: 100%; width: 100%; overflow: hidden;
  background-color: var(--clr-background);
  color: var(--clr-text-primary);
  font-family: var(--font-family-primary);
  font-size: var(--font-size-base); 
  line-height: var(--line-height-base); 
  font-weight: var(--font-weight-regular); 
}

/* --- Page Container --- */
.page-container { display: flex; height: 100dvh; width: 100vw; }

/* --- Columns --- */
/* Initial animation state */
.left-column, .right-column, .middle-column {
    opacity: 0;
    transform: translateY(50px);
    will-change: transform, opacity;
}
/* Layout */
.left-column, .right-column {
  flex: var(--column-flex-side);
  display: flex; align-items: center; justify-content: center;
  padding: var(--padding-columns);
  height: 100%; position: relative;
  z-index: var(--z-index-side-columns);
  color: var(--clr-text-primary);
}
.middle-column {
  flex: var(--column-flex-middle);
  height: 100%; overflow: hidden; position: relative;
}

/* ========================================================================== */
/*            SECTION 1 & 3 / LEFT & RIGHT (TOP & BOTTOM)                     */
/* ========================================================================== */

/* TITLE / INFO text styling */
.title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-bold);
  background-color: transparent; display: inline; border: none; padding: 0;
  cursor: pointer;
}
.info { /* Class for the INFO BUTTON */
  font-size: var(--font-size-small); 
  font-weight: var(--font-weight-regular);
  background-color: transparent; display: inline; border: none; padding: 0;
  cursor: pointer;
}

.info:hover { /* Class for the INFO BUTTON */
  text-decoration: underline;
}
.intro-title.overlapped { color: var(--clr-text-overlap); opacity: 0.65; } 

/* ========================================================================== */
/*            SECTION 2 / MIDDLE / VIDEO                                      */
/* ========================================================================== */

/* --- SCROLL ITEM --- */
.scroll-item { /* Should contain .video-item */
  width: 100%;
  height: 100%; /* Or 100dvh */
  position: relative;
  overflow: hidden;
  /* ADD FLEX TO CENTER THE CONTENT CONTAINER */
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0px; /* Add some padding around the content container */
}

/* --- Video Track --- */
.video-track { width: 100%; height: 100%; position: relative; will-change: transform; }

/* --- Video Item --- */
.video-item { /* Inherits */ }

/* --- Aspect Wrapper --- */
.video-aspect-wrapper {
  position: absolute;
  top: 50%; left: 50%; transform: translate(-50%, -50%);
  width: 100%; 
  overflow: hidden;
  /*background-color: var(--clr-background);*/
  background-color: magenta;
  border-radius: var(--radius-video); 
  flex-shrink: 0; 
   /* --- Animation Related --- */
   opacity: 0;
   will-change: opacity, transform; /* Optimize animation */
}

/* --- Thumbnail --- */
.video-thumbnail {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;
  z-index: var(--z-index-thumbnail);
  pointer-events: none; opacity: 1; visibility: visible; border-radius: inherit;
  transition: opacity var(--transition-duration-slow) var(--transition-ease), visibility 0s linear 0s;
}
.video-thumbnail.thumbnail-hidden {
  opacity: 0; visibility: hidden; z-index: 0;
  transition: opacity var(--transition-duration-slow) var(--transition-ease), visibility 0s linear var(--transition-duration-slow);
}

/* --- Iframe --- */
.video-aspect-wrapper iframe {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: block; border: none;
  border-radius: inherit; z-index: var(--z-index-iframe); pointer-events: none;
}

/* --- Video Controls --- */
.video-controls {
  opacity: 0; visibility: hidden;
  transition: opacity var(--transition-duration) var(--transition-ease), visibility 0s linear var(--transition-duration);
  position: absolute; bottom: var(--space-s); 
  left: 50%; transform: translateX(-50%);
  z-index: var(--z-index-controls);
  background: var(--clr-overlay-bg); 
  padding: var(--padding-controls-y) var(--padding-controls-x); 
  border-radius: var(--radius-controls); 
  display: flex; gap: var(--gap-controls); 
  align-items: center; pointer-events: none;
  display: flex;        /* Use Flexbox */
  align-items: center;  /* Vertically align items in the controls bar */
  gap: 5px;            /* Adjust gap as needed */
  width: calc(100% - var(--space-s)) ;           /* Example: Make controls take up more width */
  max-width: 1200px;
}

.video-aspect-wrapper:hover .video-controls { opacity: 1; visibility: visible; pointer-events: auto; transition-delay: 0s; }

.controls-button {
  background: none; border: none; color: var(--clr-text-overlay);
  padding: var(--padding-controls-button-y) var(--padding-controls-button-x); 
  cursor: pointer; font-size: var(--font-size-controls); 
  transition: background-color var(--transition-duration-fast) ease;
  flex-shrink: 0;
}
.controls-button:hover { background-color: var(--clr-button-hover-bg); border-radius: var(--radius-button-hover); } 

/* ======================================== */
/*            PROGRESS BAR                  */
/* ======================================== */
.video-controls .progress-bar-container {
  flex-grow: 1; /* Allow the bar to take up available space */
  height: 2px;  /* Adjust height of the bar */
  background-color: rgba(255, 255, 255, 0.3); /* Dim background */
  border-radius: 0px;
  cursor: pointer; /* Indicate it's clickable */
  overflow: hidden; /* Clip the fill element */
  position: relative; /* Needed if fill uses absolute positioning (optional) */
}

.progress-bar-fill {
  height: 100%;
  width: 0%; /* Start at 0 width */
  background-color: #ffffff; /* White fill */
  border-radius: 0px;
  /* Add a subtle transition for smoother updates */
  transition: width 0.1s linear;
  /* Position absolute is an option, but width on block works fine too */
   /* position: absolute; */
   /* top: 0; */
   /* left: 0; */
}

.video-time-display {
  position: absolute;
  bottom: 2px; 
  right: 10px;
  z-index: 6; /* Same level or slightly above progress bar container */
  color: var(--clr-text-overlay); 
  font-size: var(--font-size-xxsmall); /* Small text */
  font-family: monospace; /* Monospaced font looks good for time */
  pointer-events: none; /* Not interactive */
  background-color: rgba(0, 0, 0, 0.3); /* Optional subtle background */
  padding: 1px 4px;
  border-radius: 2px;
  line-height: 1;
}

/* --- Video Info Overlay --- */
.video-info-overlay {
  position: absolute;
  /* placement set in playlistManager.js */
  transform: translate(-50%, -50%);
  
  width: 100%;
  max-width: 60%;
  box-sizing: border-box;
  

  z-index: var(--z-index-info-overlay, 4);
  color: var(--clr-text-primary);
  /*background-color: rgba(251, 245, 233, 0.7);*/
  background-color: aquamarine;
  padding: 0;
  border-radius: none;
  text-align: left;

  /* Initial state: hidden */
  opacity: 0;
  visibility: hidden;
  transform: translateY(15px); /* Vertical offset ONLY */
  pointer-events: none;

  /* Transition */
  transition: opacity var(--transition-duration, 0.5s) var(--transition-ease, ease-in-out),
              visibility 0s linear var(--transition-duration, 0.5s),
              transform var(--transition-duration, 0.5s) var(--transition-ease, ease-in-out),
              bottom var(--transition-duration, 0.5s) var(--transition-ease, ease-in-out),
              left var(--transition-duration, 0.5s) var(--transition-ease, ease-in-out);
}

/* Text styling inside overlay */
.video-info-overlay .video-info-title {
  font-size: var(--font-size-small, 1 em);
  font-weight: var(--font-weight-regular, 400);
  margin: 0 0 var(--space-xs, 4px) 0;
  line-height: var(--line-height-heading, 1.2);
  white-space: normal; /* Allow wrapping */
  overflow: visible;
  text-overflow: clip;
}
.video-info-overlay .video-info-year {
  font-size: var(--font-size-xsmall, 0.9em);
  font-weight: var(--font-weight-light, 300);
  margin: 0;
  line-height: var(--line-height-tight, 1);
  opacity: 0.8;
}

/* --- Hover Effect --- */
.video-aspect-wrapper:hover + .video-info-overlay {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  transition-delay: 0s;
}

/* ========================================================================== */
/*            SECTION 2 / MIDDLE / INFO                                       */
/* ========================================================================== */
/*.info-section .info-content h2,
.info-section .info-content h3,
.info-section .info-content p {
    opacity: 0;
    transform: translateY(15px);
    will-change: transform, opacity;
}*/

.scroll-item.info-section .info-column .info-block {
  opacity: 0;                  /* <<< Start invisible */
  transform: translateY(20px); /* <<< Start 20px lower */
  will-change: transform, opacity;
}

.info-section {
    display: flex; justify-content: flex-start; /* Keep your alignment */
    align-items: center;
    color: var(--clr-text-primary);
    background-color: var(--clr-background);
    box-sizing: border-box; height: 100%; width: 100%;
    position: relative; overflow: hidden;
    padding: 0;/*var(--space-xxl); /* Add overall padding */
}
.info-content {
    display: flex; flex-direction: row; justify-content: flex-start;
    gap: var(--gap-info-columns); 
    width: 100%;
    max-width: var(--content-max-width-info-wide); 
    box-sizing: border-box; text-align: left;
    transform: translateY(calc(50% - (var(--font-size-info-p) * 0.5) )); /* Keep your transform */
}
.info-column { box-sizing: border-box; text-align: left; flex-basis: 0; flex-shrink: 1; }
.info-column-left { flex-grow: var(--info-column-left-grow); } 
.info-column-right { flex-grow: var(--info-column-right-grow); } 
.info-column h2, .info-column h3 {
    font-size: var(--font-size-xxsmall); font-weight: var(--font-weight-bold); 
    margin-bottom: var(--space-after-heading);
    text-transform: uppercase; letter-spacing: .05em;
}
.info-column p {
    font-size: var(--font-size-info-p); font-weight: var(--font-weight-regular);
    line-height: var(--line-height-info-p); 
    margin-bottom: var(--space-between-paragraphs);
}
.info-column p + h2,
.info-column p + h3 {
    margin-top: var(--space-paragraph-before-heading); /* <<< Add extra top margin to heading */
}

/* --- Recognition List Styling --- */
.info-column .recognition-list {
  margin-top: var(--space-xl, 20px); /* Add space above the list */
  /* border-top: 1px solid rgba(0,0,0,0.1); */ /* Optional separator */
  /* padding-top: var(--space-l, 15px); */  /* Optional separator */
}

.info-column .recognition-list h4 { /* Style the heading if you added one */
  font-size: var(--font-size-small, 0.9em); /* Smaller heading */
  font-weight: var(--font-weight-bold, 600);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: var(--space-m, 12px); /* Space below heading */
  color: var(--clr-text-primary);
  opacity: 0.7; /* Slightly faded? */
}

/* Style each award item block */
.info-column .recognition-item {
  margin-bottom: var(--space-, 15px); /* Space between award entries */
}
/* Remove extra space after the very last award item in the list */
.info-column .recognition-list .recognition-item:last-child {
    margin-bottom: 0;
}

/* Style the Award Name */
.info-column .recognition-award-name {
  font-size: var(--font-size-xsmall, 0.9em); /* Or your desired size */
  font-weight: var(--font-weight-medium, 500); /* Make it stand out */
  line-height: var(--line-height-base, 1.2em); /* Tighter line height maybe */
  color: var(--clr-text-primary);
  margin: 0; /* Small space between name and details */
}

/* Style the Details */
.info-column .recognition-details {
  font-family: var(--font-family-secondary);
  font-style: italic;
  letter-spacing: 0.02em;
  font-size: calc(var(--font-size-xsmall, 0.9em) * 0.9); /* Slightly smaller than name */
  font-weight: var(--font-weight-regular, 400);
  line-height: var(--line-height-base, 1.0)em;
  color: var(--clr-text-primary);
  opacity: 0.7;
  margin: 0;
}

/* remove margin from the very last element */
.info-column > *:last-child {
    margin-bottom: 0;
}

/* INFO / EMAIL AND LINKS */

.info-column a {
  color: var(--clr-text-primary);
  background-color: transparent;
  text-decoration: none;
  transition: color var(--transition-duration-fast, 0.2s) ease,
              text-decoration-color var(--transition-duration-fast, 0.2s) ease;
  cursor: pointer;
  target-name:new;
  target-new:tab;
}

/* --- Hover/Focus State for Links --- */
.info-column a:hover,
.info-column a:focus { 
  color: #A0522D;
  text-decoration: none;
  text-decoration-color: transparent;
  outline: none;
}
/* --- Specific Styling for Email Links --- */
.info-column a.email-link {
  /* Add specific styles if you want email links to look different */
  /* For example: */
  /* font-weight: var(--font-weight-bold); */
  /* word-break: break-all; */ /* Help break long emails if needed */
}
.info-column a.email-link::before {
  /* Optional: Add an icon? */
  /* content: 'ðŸ“§ '; */
}

/* --- Specific Styling for Other Links (Example) --- */
.info-column a.internal-link {
   /* Example: Maybe no underline */
   /* text-decoration: none; */
   /* font-weight: var(--font-weight-bold); */
}

/* --- Active Scroll Item Style --- */
.scroll-item.active-scroll-item { /* ... */ }

/* ======================================== */
/*            MOBILE LAYOUT STYLES          */
/* ======================================== */
@media (max-width: 768px) { /* Use config breakpoint later if desired */

  .page-container { flex-direction: column; }
  .left-column, .right-column, .middle-column {
      flex: none; width: 100%; height: auto;
      padding: var(--space-l); /* Mobile padding */
  }
  .left-column { order: 1; text-align: center; flex-shrink: 0; padding-top: 5vh; padding-bottom: 5vh; } /* Adjust padding */
  .middle-column { order: 2; flex-grow: 1; padding: 0}
  .right-column { order: 3; text-align: center; flex-shrink: 0; padding-top: 0; padding-bottom: 15vh; } /* Adjust padding */

  .scroll-item .video-aspect-wrapper { width: 92%; /* Keep mobile size */ }

  .scroll-item .info-section {
    display: block;
    height: 100%; overflow: auto; box-sizing: border-box;
  }

  .info-section .info-content {
    width: 80%;
    max-width: 100%; /* Use full 90% */
    margin-left: auto; margin-right: auto;
    transform: none;
    display: flex; flex-direction: column; align-items: center;
    gap: 30px;
    box-sizing: border-box;
}

.info-column {
    width: 100%;
    text-align: center;
    flex-grow: 0;
    flex-basis: auto;
    flex-shrink: 1;
}
  .info-column-left, .info-column-right { /* No specific flex needed */ }

  /* Mobile Font Sizes */
  .info-column h2, .info-column h3 { font-size: var(--font-size-mobile-xsmall);}
  .info-column p { font-size: var(--font-size-mobile-xsmall); line-height: var(--line-height-base); } /* Use base line height */

  /* Recognition */
  .info-column .recognition-list h4 {
    text-align: center; /* Center heading on mobile? */
  }
  .info-column .recognition-item {
    margin-bottom: var(--space-m); /* Slightly less space */
  }
  .info-column .recognition-award-name {
    /* Adjust font size? */
  }
  .info-column .recognition-details {
    /* Adjust font size? */
    font-size: calc(var(--font-size-small, 0.9em) * 0.85);
  }

  #scroll-to-info-btn.is-hidden-on-mobile {
    display: none;
  }

  /* Mobile Controls/ Overlay */
  .video-controls { bottom: var(--space-m); padding: var(--space-s) var(--space-m); gap: var(--space-s); }
  .controls-button { padding: var(--space-s) var(--space-m); font-size: 0.8em; }

  /* Video Info /Overlay */
  .video-info-overlay .video-info-title { font-size: 0.9em; }
  .video-info-overlay .video-info-year { font-size: 0.75em; }
  .scroll-item .video-info-overlay {
      /* --- Center Horizontally --- */
      width: auto; /* Let JS control max-width */
      text-align: center; /* <<< Center text on mobile */

      transform: translateX(-50%) translateY(10px);
      opacity: 0;
      visibility: hidden;
  }
  .video-aspect-wrapper:hover + .video-info-overlay {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%); /* <<< Final transform includes centering */
      transition-delay: 0s;
  }

}