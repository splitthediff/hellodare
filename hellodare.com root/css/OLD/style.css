/* ========================================================================== */
/*                                PAGE LAYOUT                                 */
/* ========================================================================== */

.page-container {
  display: flex;
  height: 100dvh;
  width: 100vw;
}

/* --- Columns --- */
.left-column, .right-column, .middle-column {
  /* Initial animation state */
  opacity: 0;
  transform: translateY(50px);
  will-change: transform, opacity;
  /* Layout */
  height: 100%;
  position: relative; /* For z-index */
}
.left-column, .right-column {
  flex: var(--column-flex-side);
  display: flex;
  flex-direction: column; /* Stack items vertically */
  align-items: center;
  justify-content: center;
  padding: var(--padding-columns);
  z-index: var(--z-index-side-columns);
  color: var(--clr-text-primary);
}
.middle-column {
  flex: var(--column-flex-middle);
  overflow: hidden; /* Clip video track */
}

/* ========================================================================== */
/*                        LEFT & RIGHT COLUMN CONTENT                         */
/* ========================================================================== */

/* --- Title (Left Column) --- */
.title {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-bold);
  background-color: transparent; display: inline; border: none; padding: 0;
  cursor: pointer;
}
.intro-title.overlapped {
  color: var(--clr-text-overlap); opacity: 0.65;
}

/* --- Info Button (Right Column) --- */
.info { /* Specific button/link */
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  background-color: transparent; display: inline; border: none; padding: 0;
  cursor: pointer;
  margin-bottom: 30px; /* Space above nav menu */
}
.info:hover { text-decoration: underline; }


/* --- Navigation Menu (Right Column) --- */
.navigation-menu {
  width: 100%;
  text-align: left; /* Or center */
  margin-top: 30px; /* Added from previous example */
}
.nav-link-list {
  list-style: none; padding: 0; margin: 0 0 20px 0;
  max-height: 50vh; overflow-y: auto;
}
.nav-link-list li { margin-bottom: 8px; }
.nav-link {
  font-family: var(--font-family-primary); font-size: var(--font-size-xsmall);
  color: var(--clr-text-primary); text-decoration: none; cursor: pointer;
  display: inline-block; transition: color 0.2s ease; opacity: 0.6;
}
.nav-link:hover,
.nav-link.active { color: var(--clr-text-primary); opacity: 1.0; }
.nav-controls { display: flex; justify-content: center; gap: 15px; }
.nav-button {
  font-family: var(--font-family-primary); font-size: var(--font-size-xsmall);
  background-color: transparent; border: 1px solid var(--clr-text-primary);
  color: var(--clr-text-primary); padding: 5px 10px; cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease; border-radius: 4px;
}
.nav-button:hover { background-color: rgba(0, 0, 0, 0.05); }


/* ========================================================================== */
/*                       MIDDLE COLUMN (VIDEO SCROLL)                         */
/* ========================================================================== */

/* --- Video Track --- */
.video-track {
  width: 100%; height: 100%; position: relative; will-change: transform;
}

/* --- Scroll Item (Videos & Info Section Container) --- */
.scroll-item {
  width: 100%; height: 100%; position: relative; overflow: hidden;
  display: flex; justify-content: center; align-items: center; padding: 0px;
}

/* --- Active Scroll Item --- */
.scroll-item.active-scroll-item {
  /* Add indicator styles if desired */
  /* outline: 2px solid red; */
}

/* ========================================================================== */
/*                         VIDEO ITEM COMPONENTS                              */
/* ========================================================================== */

/* --- Video Item Container --- */
.video-item { /* Inherits from .scroll-item */ }

/* --- Aspect Wrapper --- */
.video-aspect-wrapper {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  width: 100%; overflow: hidden;
  background-color: #111; /* Changed from --clr-background for contrast */
  border-radius: var(--radius-video); flex-shrink: 0;
  /* Animation */
  opacity: 0; will-change: opacity, transform;
   /* aspect-ratio set by JS */
}

/* --- Thumbnail --- */
.video-thumbnail {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;
  z-index: var(--z-index-thumbnail); pointer-events: none;
  opacity: 1; visibility: visible; border-radius: inherit;
  transition: opacity var(--transition-duration-slow) var(--transition-ease), visibility 0s linear 0s;
}
.video-thumbnail.thumbnail-hidden {
  opacity: 0; visibility: hidden; z-index: 0;
  transition: opacity var(--transition-duration-slow) var(--transition-ease), visibility 0s linear var(--transition-duration-slow);
}

/* --- Iframe --- */
.video-aspect-wrapper iframe {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: block; border: none;
  border-radius: inherit; z-index: var(--z-index-iframe); pointer-events: none;
}

/* --- Video Controls Bar --- */
.video-controls {
  opacity: 0; visibility: hidden;
  transition: opacity var(--transition-duration) var(--transition-ease), visibility 0s linear var(--transition-duration);
  position: absolute; bottom: var(--space-s);
  left: 50%; transform: translateX(-50%);
  z-index: var(--z-index-controls);
  background: var(--clr-overlay-bg);
  padding: var(--padding-controls-y) var(--padding-controls-x);
  border-radius: var(--radius-controls);
  display: flex; align-items: center; /* Align button, bar, time */
  gap: var(--gap-controls);
  pointer-events: none;
  width: calc(100% - var(--space-s) * 2) ; /* Adjusted width */
  max-width: 1200px;
}
.video-aspect-wrapper:hover .video-controls {
  opacity: 1; visibility: visible; pointer-events: auto; transition-delay: 0s;
}

/* --- Control Buttons --- */
.controls-button {
  background: none; border: none; color: var(--clr-text-overlay);
  padding: var(--padding-controls-button-y) var(--padding-controls-button-x);
  cursor: pointer; font-size: var(--font-size-controls);
  transition: background-color var(--transition-duration-fast) ease;
  flex-shrink: 0; /* Prevent buttons shrinking */
}
.controls-button:hover {
  background-color: var(--clr-button-hover-bg); border-radius: var(--radius-button-hover);
}

/* --- Progress Bar & Time (Inside Controls) --- */
.video-controls .progress-bar-container {
  flex-grow: 1; height: 2px; background-color: rgba(255, 255, 255, 0.3);
  border-radius: 0px; cursor: pointer; overflow: hidden; position: relative;
}
.progress-bar-fill {
  height: 100%; width: 0%; background-color: var(--clr-text-overlay); /* Use variable */
  border-radius: 0px; transition: width 0.1s linear;
}
.video-time-display {
  color: var(--clr-text-overlay); font-size: var(--font-size-xxsmall);
  font-family: monospace; pointer-events: none;
  background-color: rgba(0, 0, 0, 0.3); padding: 1px 4px;
  border-radius: 2px; line-height: 1; flex-shrink: 0; /* Prevent shrinking */
}

/* --- Video Info Overlay (Below Video Frame) --- */
.video-info-overlay {
  position: absolute; /* Relative to .scroll-item */
  /* top/left set by JS (positionSingleInfoOverlay) */
  width: auto; max-width: 60%; box-sizing: border-box;
  z-index: var(--z-index-info-overlay);
  color: var(--clr-text-primary);
  padding: 0; text-align: left;
  /* Initial state */
  opacity: 0; visibility: hidden; transform: translateY(15px); pointer-events: none;
  /* Transition */
  transition: opacity var(--transition-duration) var(--transition-ease),
              visibility 0s linear var(--transition-duration),
              transform var(--transition-duration) var(--transition-ease),
              bottom var(--transition-duration) var(--transition-ease), /* Keep if using bottom */
              top var(--transition-duration) var(--transition-ease),    /* Keep if using top */
              left var(--transition-duration) var(--transition-ease);
}
.video-info-overlay .video-info-title {
  font-size: var(--font-size-small); font-weight: var(--font-weight-regular);
  margin: 0 0 var(--space-xs) 0; line-height: var(--line-height-heading);
  white-space: normal; overflow: visible; text-overflow: clip;
}
.video-info-overlay .video-info-year {
  font-size: var(--font-size-xsmall); font-weight: var(--font-weight-light);
  margin: 0; line-height: var(--line-height-tight); opacity: 0.8;
}
/* Hover effect for overlay */
.video-item:hover .video-info-overlay { /* Hover the item */
  opacity: 1; visibility: visible; transform: translateY(0);
  transition-delay: 0.2s, 0.2s, 0.2s; /* Apply delay to transitions */
}


/* ========================================================================== */
/*                      INFO SECTION (LAST SCROLL ITEM)                       */
/* ========================================================================== */

/* --- Initial state for animation --- */
.scroll-item.info-section .info-block { /* Target info blocks directly */
  opacity: 0; transform: translateY(20px); will-change: transform, opacity;
}

/* --- Layout --- */
.info-section { /* Is also .scroll-item */
  display: flex; justify-content: center; /* Center content horizontally */
  align-items: center; /* Center content vertically */
  color: var(--clr-text-primary); background-color: var(--clr-background);
  padding: var(--space-xxl); /* Overall padding */
}
.info-content {
  display: flex; flex-direction: row; /* Side-by-side columns */
  justify-content: flex-start; /* Align columns to start */
  gap: var(--gap-info-columns); width: 100%;
  max-width: var(--content-max-width-info-wide); text-align: left;
  /* remove translateY */
  /* transform: translateY(calc(50% - (var(--font-size-info-p) * 0.5) )); */
}
.info-column {
  box-sizing: border-box; text-align: left; flex-basis: 0; flex-shrink: 1;
}
.info-column-left { flex-grow: var(--info-column-left-grow); }
.info-column-right { flex-grow: var(--info-column-right-grow); }

/* --- Text Styling --- */
.info-column h2, .info-column h3 {
  font-size: var(--font-size-xxsmall); font-weight: var(--font-weight-bold);
  margin-bottom: var(--space-after-heading); text-transform: uppercase; letter-spacing: .05em;
}
.info-column p {
  font-size: var(--font-size-info-p); font-weight: var(--font-weight-regular);
  line-height: var(--line-height-info-p); margin-bottom: var(--space-between-paragraphs);
}
/* Spacing between paragraph and next heading */
.info-column .info-block:not(:first-child) h2,
.info-column .info-block:not(:first-child) h3 {
    margin-top: var(--space-paragraph-before-heading);
}
/* Remove margin from last paragraph in a block */
.info-column .info-block p:last-child {
    margin-bottom: 0;
}
/* Remove margin from very last block */
.info-column > .info-block:last-child { margin-bottom: 0; }


/* --- Recognition List --- */
.info-column .recognition-list { margin-top: var(--space-xl); }
.info-column .recognition-list h4 { /* Style if using h4 */ }
.info-column .recognition-item { margin-bottom: var(--space-m); }
.info-column .recognition-list .recognition-item:last-child { margin-bottom: 0; }
.info-column .recognition-award-name {
  font-size: var(--font-size-xsmall); font-weight: var(--font-weight-medium);
  line-height: var(--line-height-heading); color: var(--clr-text-primary); margin: 0;
}
.info-column .recognition-details {
  font-family: var(--font-family-secondary); font-style: italic; letter-spacing: 0.02em;
  font-size: calc(var(--font-size-xsmall) * 0.9); font-weight: var(--font-weight-regular);
  line-height: var(--line-height-tight); color: var(--clr-text-primary); opacity: 0.7; margin: 0;
}

/* --- Links --- */
.info-column a {
  color: var(--clr-text-primary); background-color: transparent; text-decoration: none;
  transition: color var(--transition-duration-fast) ease; cursor: pointer;
  /* target attributes are not CSS */
}
.info-column a:hover,
.info-column a:focus { color: var(--clr-link-hover); outline: none; }
.info-column a.email-link { /* Optional specific styles */ }
.info-column a.internal-link { /* Optional specific styles */ }


/* ========================================================================== */
/*                           MOBILE LAYOUT STYLES                             */
/* ========================================================================== */
@media (max-width: 768px) { /* Use config value eventually */

  .page-container { flex-direction: column; }

  /* --- Columns --- */
  .left-column, .right-column, .middle-column {
      flex: none; width: 100%; height: auto;
      padding: var(--space-l); /* Mobile padding */
  }
  .left-column { order: 1; text-align: center; flex-shrink: 0; padding: 5vh var(--space-l); }
  .middle-column { order: 2; flex-grow: 1; padding: 0; /* Remove padding for full bleed video area */ }
  .right-column { order: 3; text-align: center; flex-shrink: 0; padding: 0 var(--space-l) 5vh; } /* Adjust padding */

  /* --- Video Item --- */
  .scroll-item.video-item {
      padding: 10px; /* Add back padding around wrapper on mobile */
  }
  .video-aspect-wrapper {
      width: 100%; /* Let it fill padded parent */
      /* Centering inherited from scroll-item flex */
  }

  /* --- Controls & Overlays --- */
  .video-controls {
      bottom: var(--space-m); padding: var(--space-s) var(--space-m); gap: var(--space-s);
      width: calc(100% - var(--space-m) * 2) ; /* Adjust width based on padding */
  }
  .controls-button { padding: var(--space-s) var(--space-m); font-size: 0.8em; }

  .video-info-overlay {
      /* JS sets top */
      left: 50%; /* Center using transform */
      transform: translateX(-50%) translateY(15px); /* Initial state */
      max-width: 90%;
      text-align: center;
  }
  .video-item:hover .video-info-overlay {
       transform: translateX(-50%) translateY(0); /* Hover state */
   }
  .video-info-overlay .video-info-title { font-size: 0.9em; }
  .video-info-overlay .video-info-year { font-size: 0.75em; }


  /* --- Info Section --- */
  .scroll-item.info-section { /* Inherits .scroll-item */
    padding: 20px; /* Padding for info section */
    align-items: flex-start; /* Align content to top on mobile? */
    overflow-y: auto; /* Allow scrolling if content overflows */
  }
  .info-content {
    flex-direction: column; /* Stack columns */
    gap: 30px;
    width: 100%; /* Take full width */
    max-width: 100%;
    transform: none; /* Remove vertical centering */
    text-align: center; /* Center text */
  }
  .info-column {
      width: 100%; text-align: center; flex-grow: 0; flex-basis: auto; flex-shrink: 1;
  }
  .info-column-left, .info-column-right { /* No specific flex needed */ }

  /* Mobile Font Sizes */
  .info-column h2, .info-column h3 { font-size: var(--font-size-mobile-xsmall); }
  .info-column p { font-size: var(--font-size-mobile-xsmall); line-height: var(--line-height-base); }

  /* Recognition */
  .info-column .recognition-list { margin-top: var(--space-l); }
  .info-column .recognition-list h4 { text-align: center; }
  .info-column .recognition-item { margin-bottom: var(--space-m); }
  .info-column .recognition-details { font-size: calc(var(--font-size-small) * 0.85); }

  /* --- Navigation Menu --- */
  .navigation-menu {
    margin-top: 15px;
    padding-bottom: 15px;
    text-align: center; /* Center links */
  }
  .nav-link-list {
      max-height: none; overflow-y: visible; margin-bottom: 15px;
  }
   .nav-link { font-size: var(--font-size-xsmall); }
   .nav-button { font-size: var(--font-size-xsmall); }

   /* Hide Info button when on info page */
  #scroll-to-info-btn.is-hidden-on-mobile {
    display: none;
  }

}