(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();function J(e,t){let i;return function(){const n=arguments,r=this;i||(e.apply(r,n),i=!0,setTimeout(()=>{i=!1},t))}}function Q(){let e=!1;return"maxTouchPoints"in navigator?e=navigator.maxTouchPoints>0:"ontouchstart"in window?e=!0:"msMaxTouchPoints"in navigator&&(e=navigator.msMaxTouchPoints>0),e}function T(e){if(isNaN(e)||e<0)return"0:00";const t=Math.floor(e/60),i=Math.floor(e%60),n=i<10?`0${i}`:i;return`${t}:${n}`}function Z(e){return isNaN(e)?e:e<10?`0${e}`:e}function ee(e,t){return e>0&&t>0?e/t:16/9}function H(e,t=""){if(!e||typeof e!="object"){console.warn(`[${t}] contentElement is missing or invalid:`,e);return}Object.entries(e).forEach(([i,n])=>{n?n instanceof Element||console.warn(`[${t}] Value for '${i}' is not a DOM element:`,n):console.warn(`[${t}] Missing element for key: '${i}'`)})}function te(e="MM DD YYYY"){const t=new Date,i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),r=t.getFullYear();return e==="MM DD YYYY"?`${i} ${n} ${r}`:`${i}/${n}/${r}`}const s={animation:{desktopDuration:1.3,mobileDuration:.7,blurReset:"blur(0px)",opacityNavOpen:.3,blurNavOpen:"blur(10px)"},input:{desktopThrottle:1500,mobileThrottle:200,touchSensitivityY:30,touchSensitivityX:100,resizeDebounce:250},video:{defaultUnmuteLevel:.5,vimeoQuality:"1080p",vimeoParams:"muted=1&controls=0&loop=0",timeupdateEndThreshold:.1,localThumbnailBasePath:"assets/images/thumbnails/"},navigation:{navOpacity:.6},selectors:{track:".js-video-track",scrollItem:".scroll-item",middleColumn:".middle-column",infoButtonId:"scroll-to-info-btn",titleElementId:"main-page-title",infoSectionId:"#info-section",introSectionId:"#intro-section",outroSectionId:"#outro-section",menuToggleButtonId:"menu-toggle-btn",navigationContainerId:"main-navigation",activeScrollItemClass:"active-scroll-item"},breakpoints:{mobileMaxWidth:1100,minHeight:900},layout:{overlayOffsetBottom:15}};let w=null,B=null,C=null,O=null,R=s.input.touchSensitivityY,A=s.input.touchSensitivityX;async function W(e){const t=e.target.tagName;if(!(t==="INPUT"||t==="TEXTAREA"||e.target.isContentEditable))switch(e.key){case" ":case"Spacebar":if(e.preventDefault(),O&&C){const i=O();i&&C(i)}else console.warn("[InputMgr] Spacebar ignored: Callbacks not initialized.");break;case"ArrowLeft":case"ArrowUp":e.preventDefault(),w&&w(-1);break;case"ArrowRight":case"ArrowDown":e.preventDefault(),w&&w(1);break;case"AudioVolumeUp":case"+":e.preventDefault(),B&&await B(.1);break;case"AudioVolumeDown":case"-":e.preventDefault(),B&&await B(-.1);break}}function V(e){e.preventDefault(),w&&w(e.deltaY)}function ie(){let e=null,t=null;function i(o){o.touches.length===1?(e=o.touches[0].clientY,t=o.touches[0].clientX):(e=null,t=null)}function n(o){if(e!==null){const a=o.touches[0].clientX;Math.abs(t-a)<A&&o.preventDefault()}}function r(o){if(e===null)return;const a=o.changedTouches[0].clientY,l=o.changedTouches[0].clientX,c=e-a,u=Math.abs(t-l);Math.abs(c)>R&&u<A&&w&&w(c),e=null,t=null}return{onTouchStart:i,onTouchMove:n,onTouchEnd:r}}function ne(e,t){let i;return function(){clearTimeout(i),i=setTimeout(()=>{e(),t(),D()},s.input.resizeDebounce)}}function oe(e,t){window.removeEventListener("keydown",W),window.removeEventListener("wheel",V),window.removeEventListener("touchstart",e.onTouchStart),window.removeEventListener("touchmove",e.onTouchMove),window.removeEventListener("touchend",e.onTouchEnd),window.removeEventListener("resize",t),window.addEventListener("keydown",W),window.addEventListener("wheel",V,{passive:!1}),window.addEventListener("touchstart",e.onTouchStart,{passive:!0}),window.addEventListener("touchmove",e.onTouchMove,{passive:!1}),window.addEventListener("touchend",e.onTouchEnd,{passive:!0}),window.addEventListener("resize",t)}function re(e,t,i,n,r,o,a=s.input.resizeDebounce,l=s.input.touchSensitivityY,c=s.input.touchSensitivityX){w=e,B=n,O=r,C=h=>{if(h&&typeof o=="function")try{o(h)}catch(g){console.error("Error calling togglePlayPauseFn from wrapper:",g)}else console.warn(`[InputMgr] Cannot toggle: video or togglePlayPauseFn missing. Video: ${!!h}, Fn: ${typeof o}`)},R=l,A=c;const u=ie(),f=ne(t,i);oe(u,f)}function _(){return window.innerWidth<=s.breakpoints.mobileMaxWidth}function x(){const e=document.getElementById(s.selectors.navigationContainerId);return e?e.classList.contains("is-visible"):!1}let I=[],y=0;const se=s.video.defaultUnmuteLevel;function ae(e){I=e||[],y=0,k(s.selectors.introSectionId),k(s.selectors.infoSectionId)}async function le(e,t,i=null){I||(I=[]);const n=I.length,r=0,o=n+1,a=document.querySelectorAll(s.selectors.scrollItem);if(!(!a||a.length===0)){e===o?typeof i=="function"?i():q(s.selectors.infoSectionId):t===o&&e!==t&&k(s.selectors.infoSectionId),e===r?q(s.selectors.introSectionId):t===r&&e!==t&&k(s.selectors.introSectionId);for(let l=0;l<a.length;l++){const c=a[l];if(!c)continue;const u=l>0&&l<=n,f=u?I[l-1]:null,h=Y(c,u),g=X();l===e?(h&&g&&de(h,u,g,f),u&&f&&fe(f)):(h&&he(h,u,g),u&&f&&me(f))}}}function q(e){const t=gsap.utils.toArray(`${e} .info-block`);t.length>0&&gsap.to(t,{opacity:1,y:0,filter:s.animation.blurReset,duration:1,ease:"power1.out",stagger:{each:.5,from:"start"},overwrite:!0,delay:.1})}function k(e){const t=gsap.utils.toArray(`${e} .info-block`);t.length>0&&gsap.to(t,{opacity:0,y:20,duration:2,ease:"power1.in",overwrite:!0})}async function z(){for(const e of I)try{await(await e.initializePlayer()).setVolume(y),e._updateSoundButtonUI(y===0)}catch{e._updateSoundButtonUI(y===0)}}async function ce(e){let t=y+e;t=Math.max(0,Math.min(1,t)),t.toFixed(2)!==y.toFixed(2)&&(y=t,await z())}async function ue(){y=y>0?0:se,await z()}function Y(e,t){const i={};if(t){const n=e.querySelector(".video-aspect-wrapper"),r=e.querySelector(".video-info-overlay");n&&(i.video=n),r&&(i.overlay=r)}else if(e&&e.id===s.selectors.introSectionId){const n=e.querySelector(".info-content");n&&(i.info=n)}else if(e&&e.id===s.selectors.infoSectionId){const n=e.querySelector(".info-content");n&&(i.info=n)}return i}function X(e){let i=1,n=s.animation.blurMax,r=s.animation.blurReset,o=0,a=1;return typeof _=="function"&&typeof x=="function"&&(_()&&x()?(n=r=s.animation.blurNavOpen,o=a=.5):(n=s.animation.blurMax,r=s.animation.blurReset,o=a=1)),{setBlur:n,resetBlur:r,setOpacity:o,resetOpacity:a,initialYOffset:20,setScale:i}}function U(e,t,i=null){const n=Y(e,t),r=X();if(!n||!r){console.warn(`[VideoController] setInitialVideoContentState: Missing content or animation params for ${e.id||e.className}.`);return}const{setBlur:o,setOpacity:a,initialYOffset:l,setScale:c}=r,u=Object.entries(n).filter(([f,h])=>!!h);u.length!==0&&(gsap.set(u.map(([f,h])=>h),{y:l,scale:c,filter:o,opacity:a,xPercent:t?-50:0,yPercent:t?-50:0}),t&&i&&typeof L=="function"&&L(i.id))}function de(e,t,i,n){if(H(e,"_activateItemAnimation"),!e)return;const{setBlur:r,resetBlur:o,setOpacity:a,resetOpacity:l,initialYOffset:c,setScale:u}=i,f=Object.entries(e).filter(([h,g])=>!!g);f.length!==0&&(f.forEach(([h,g])=>{gsap.set(g,{y:c,scale:u,filter:r,opacity:a,xPercent:h==="video"&&t?-50:0,yPercent:h==="video"&&t?-50:0,transformOrigin:"center center"})}),gsap.to(f.map(([h,g])=>g),{opacity:l,scale:1,filter:o,y:0,duration:.6,delay:.1,ease:"power1.out",overwrite:!0,stagger:f.length>1?.1:0,onComplete:()=>{t&&n&&typeof L=="function"&&L(n.id)}}))}function he(e,t,i){if(H(e,"_deactivateItemAnimation"),!e)return;const{setBlur:n,setOpacity:r,initialYOffset:o,setScale:a}=i,l=Object.entries(e).filter(([c,u])=>!!u);l.length!==0&&gsap.to(l.map(([c,u])=>u),{opacity:r,filter:n,scale:a,y:o,duration:.7,ease:"power1.in",overwrite:!0,transformOrigin:"center center"})}async function fe(e){if(e)try{const t=await e.initializePlayer();e.hasPlayedOnce?(e._updatePlayPauseButtonUI(!0),e._updateSoundButtonUI(y===0),await t.pause().catch(i=>{}),await t.setVolume(y)):(await t.setVolume(y),e._updateSoundButtonUI(y===0),await t.play(),e._updatePlayPauseButtonUI(!1))}catch(t){console.warn(`[VideoController ${e?.id}] Error activating video: ${t.message}`),e._updatePlayPauseButtonUI(!0),e._updateSoundButtonUI(y===0)}}function me(e){if(!(!e||!e.player))try{e.player.pause().catch(t=>{}),e._updateSoundButtonUI(y===0),e._updatePlayPauseButtonUI(!0)}catch(t){console.warn(`[VideoController ${e.id}] Error during deactivation: ${t.message}`)}}let p=0,d=[],P=null,S=null,b=null,m=null,F=s.animation.desktopDuration;function pe(){if(!d||d.length===0)return;d.forEach((t,i)=>{t?.classList.toggle(s.selectors.activeScrollItemClass,i===p)});const e=document.querySelectorAll("#main-navigation .nav-link");e.length>0&&e.forEach(t=>{const i=parseInt(t.dataset.index,10);t.classList.remove("active"),!isNaN(i)&&i===p&&t.classList.add("active")}),j()}function j(){if(!S||!d||d.length===0)return;const e=d.length-1,t=p===e;S.innerText="Info",S.classList.toggle("is-hidden-on-mobile",t)}function E(e,t=!1){if(!P||!d||d.length===0||e<0||e>=d.length)return;const i=p,n=d.length-1;if(e===i&&!t)return;p=e,pe(),e===0?setTimeout(()=>ve(d[0]),50):e===n&&setTimeout(()=>we(d[n]),50),i===0&&e!==0?be(d[0]):i===n&&e!==n&&Se(d[n]),le(p,i,null).catch(o=>{console.error("[goToIndex] Error controlling video playback:",o)});const r=-p*100;t?gsap.set(P,{yPercent:r}):gsap.to(P,{yPercent:r,duration:F,ease:s.animation.ease,overwrite:"auto",onComplete:()=>{}})}function ye(){S=document.getElementById(s.selectors.infoButtonId),S&&(S.style.cursor="pointer",S.addEventListener("click",t=>{if(t.preventDefault(),!d||d.length===0)return;const i=d.length-1;E(i),$()}));const e=document.getElementById(s.selectors.titleElementId);e&&(e.style.cursor="pointer",e.addEventListener("click",t=>{t.preventDefault(),E(0),$()})),b&&m&&b.addEventListener("click",()=>{m.classList.contains("is-visible")?$():(E(0),ge())})}function ge(){if(!b||!m)return;M(!0);const e=document.querySelector(".scroll-item.active-scroll-item");e&&N(e);const t=m.querySelectorAll(".nav-link");t.length>0&&(t.forEach(i=>i.style.transition="none"),gsap.set(t,{opacity:0,y:-5}),gsap.to(t,{opacity:s.navigation.navOpacity,y:0,duration:.8,ease:"power1.out",stagger:.03,delay:.1,overwrite:!0,onComplete:()=>{t.forEach(i=>i.style.removeProperty("opacity")),t.forEach(i=>i.style.removeProperty("transform")),t.forEach(i=>i.style.removeProperty("transition"))}}))}function $(){if(!m||!b||!m.classList.contains("is-visible"))return;M(!1);const e=document.querySelector(".scroll-item.active-scroll-item");e&&N(e)}function N(e){if(e.id===s.selectors.introSectionId.substring(1)||e.id===s.selectors.outroSectionId.substring(1))return;const i=[],n=e.querySelector(".video-aspect-wrapper"),r=e.querySelector(".video-info-overlay");n&&i.push(n),r&&i.push(r),i.length>0&&(x()&&_()?gsap.to(i,{filter:s.animation.blurNavOpen,opacity:s.animation.opacityNavOpen,duration:.3,ease:"power1.out",overwrite:!0}):gsap.to(i,{filter:s.animation.blurReset,opacity:1,duration:F,ease:"power1.out",overwrite:!0}))}function D(){const e=document.getElementById("main-page-title"),t=document.getElementById(s.selectors.navigationContainerId),i=s.breakpoints.minHeight;if(!e||!t)return;window.innerHeight<i?e.classList.add("title-cornered"):e.classList.remove("title-cornered")}function M(e){if(!b||!m){console.warn("SCROLL: Cannot update menu UI; one or more global menu elements not found.");return}e?(m.classList.remove("is-hidden"),m.classList.add("is-visible"),m.style.overflowY="hidden"):(m.classList.remove("is-visible"),m.classList.add("is-hidden"),m.style.overflowY="hidden"),b.setAttribute("aria-expanded",e),b.setAttribute("aria-label",e?"Close Navigation Menu":"Open Navigation Menu")}function ve(e){if(!e)return;const t=e.querySelectorAll(".intro-line");t.length!==0&&gsap.fromTo(t,{opacity:0,y:25,filter:"blur(15px)"},{opacity:1,y:0,filter:"blur(0px)",duration:3,ease:"power2.out",stagger:.6,overwrite:"auto"})}function be(e){if(!e)return;const t=e.querySelectorAll(".intro-line");t.length!==0&&gsap.to(t,{opacity:0,y:-20,filter:"blur(8px)",duration:.5,ease:"power2.in",stagger:.07,overwrite:"auto"})}function we(e){if(!e)return;const t=e.querySelectorAll(".outro-line");t.length!==0&&gsap.fromTo(t,{opacity:0,y:25,filter:"blur(15px)"},{opacity:1,y:0,filter:"blur(0px)",duration:3,ease:"power2.out",stagger:.6,overwrite:"auto"})}function Se(e){if(!e)return;const t=e.querySelectorAll(".outro-line");t.length!==0&&gsap.to(t,{opacity:0,y:-20,filter:"blur(8px)",duration:.5,ease:"power2.in",stagger:.07,overwrite:"auto"})}function Ee(e){if(ae(e),P=document.querySelector(s.selectors.track),!P)return;if(d=gsap.utils.toArray(P.children).filter(c=>c.classList.contains(s.selectors.scrollItem.substring(1))),S=document.querySelector(s.selectors.infoButtonId),b=document.getElementById(s.selectors.menuToggleButtonId),m=document.getElementById(s.selectors.navigationContainerId),d.length===0){console.error(`Scroll Init Failed: No '${s.selectors.scrollItem}' children found.`);return}const t=Q();F=t?s.animation.mobileDuration:s.animation.desktopDuration;const i=t?s.input.mobileThrottle:s.input.desktopThrottle,r=J(c=>{let u=p;if(c>0&&p<d.length-1)u++;else if(c<0&&p>0)u--;else return;u!==p&&E(u)},i);re(r,()=>{E(p,!0),b&&m&&M(!1),D()},ke,ce,()=>p<e.length?e[p]:null,(c,u)=>{c&&typeof c.togglePlayPause=="function"&&c.togglePlayPause(u).catch(f=>console.error("Error in toggle callback:",f))},s.input.resizeDebounce,s.input.touchSensitivityY,s.input.touchSensitivityX),p=0,E(0,!0),j(),ye(),b&&m?M(!1):console.error("%c[SCROLL] Menu Toggle Initial State FAILED: One or more menu elements not found!","color: red; font-weight: bold;"),D()}const G=[{vimeoid:"367537828",title:"Inside Bill's Brain / Main Title Sequence",titleShortName:"Inside Bill's Brain / MT",client:"Netflix",year:"2019",thumbnailFilename:"367537828_Inside_Bills_Brain_MT.jpg",thumbnailWidth:2048,thumbnailHeight:1080},{vimeoid:"535413159",title:"13th / GFX Reel",titleShortName:"13th / GFX",client:"Netflix",year:"2018",thumbnailFilename:"535413159_13th_GFX.jpg",thumbnailWidth:1920,thumbnailHeight:1080},{vimeoid:"535355395",title:"Icarus / Main on End",titleShortName:"Icarus MOE",client:"Netflix",year:"2018",thumbnailFilename:"535355395_Icarus_MOE.jpg",thumbnailWidth:1920,thumbnailHeight:1080},{vimeoid:"535136384",title:"Amanda Knox / Main Title",titleShortName:"Amanda Knox / MT",client:"Netflix",year:"2016",thumbnailFilename:"535136384_Amanda_Knox_MT.jpg",thumbnailWidth:1920,thumbnailHeight:1080},{vimeoid:"423363148",title:"Trial by Media / Main Title",titleShortName:"Trial by Media / MT",client:"Netflix",year:"2020",thumbnailFilename:"423363148_Trial_by_Media_MT.jpg",thumbnailWidth:2048,thumbnailHeight:972},{vimeoid:"834195660",title:"White Men Can't Jump / Main on End",titleShortName:"White Men Can't Jump / MOE",client:"Hulu",year:"2023",thumbnailFilename:"834195660_WMCJ_MOE.jpg",thumbnailWidth:1920,thumbnailHeight:1080},{vimeoid:"1059558209",title:"WhereTo: Canada Opening Shot",titleShortName:"WhereTo: Canada / Opening",client:"Expedia",year:"2024",thumbnailFilename:"1059558209_WhereTo_Canada.jpg",thumbnailWidth:1280,thumbnailHeight:720},{vimeoid:"432305926",title:"Inside Bill's Brain / GFX Reel",titleShortName:"Inside Bill's Brain / GFX",client:"Netflix",year:"2018",thumbnailFilename:"432305926_Inside_Bills_Brain_GFX.jpg",thumbnailWidth:2048,thumbnailHeight:1080},{vimeoid:"1059557536",title:"Willow / Book Opening - Episdoe 1",titleShortName:"Willow / Opening",client:"Disney+",year:"2023",thumbnailFilename:"1059557536_Willow_Opening.jpg",thumbnailWidth:1920,thumbnailHeight:1080},{vimeoid:"535137022",title:"Amanda Knox / GFX Reel",titleShortName:"Amanda Knox / GFX",client:"Netflix",year:"2016",thumbnailFilename:"535137022_Amanda_Knox_GFX.jpg",thumbnailWidth:1920,thumbnailHeight:1080},{vimeoid:"707339712",title:"More Than Robots / GFX Reel",titleShortName:"More Than Robots / GFX",client:"Disney+",year:"2022",thumbnailFilename:"707339712_More_Than_Robots_GFX.jpg",thumbnailWidth:3840,thumbnailHeight:1920}];class Ie{constructor(t){this.id=t.vimeoid,this.title=t.title,this.titleShortName=t.titleShortName||t.title||"",this.year=t.year,this.client=t.client,this.thumbnailFilename=t.thumbnailFilename||null,this.thumbnailFilename?this.thumbnailUrl=`${s.video.localThumbnailBasePath}${this.thumbnailFilename}`:(this.thumbnailUrl="",console.warn(`[Video ${this.id}] No thumbnail filename provided.`)),this.iframeSrc=`https://player.vimeo.com/video/${this.id}?${s.video.vimeoParams}&quality=${s.video.vimeoQuality}`,this.thumbnailWidth=t.thumbnailWidth||0,this.thumbnailHeight=t.thumbnailHeight||0,this.player=null,this.nativeWidth=this.thumbnailWidth>0?this.thumbnailWidth:16,this.nativeHeight=this.thumbnailHeight>0?this.thumbnailHeight:9,this.aspectRatio=ee(this.nativeWidth,this.nativeHeight),this.hasPlayedOnce=!1,this.duration=0,this.timeupdateThreshold=s.video.timeupdateEndThreshold,this.isEnding=!1,this.progressBarContainer=null,this.progressBarFill=null,this.currentTimeDisplayElement=null,this.playerInitializationPromise=null,this.thumbnailElement=null,this.videoWrapperElement=null,this.playPauseButtonElement=null,this.soundButtonElement=null}initializePlayer(){return this.playerInitializationPromise?this.playerInitializationPromise:this.player?Promise.resolve(this.player):(this.playerInitializationPromise=new Promise((t,i)=>{const n=document.getElementById(`iframe-${this.id}`);if(!n)return console.error(`[Player Init ${this.id}] Iframe not found.`),this.playerInitializationPromise=null,i(new Error(`Iframe ${this.id} not found`));try{const r=new Vimeo.Player(n);r.ready().then(async()=>{this.player=r,this.isEnding=!1;try{this.duration=await this.player.getDuration()||0}catch{this.duration=0}this._findPlayerUIElements(),this._resetPlayerUI(),this._attachPlayerListeners(),t(this.player)}).catch(o=>{console.error(`[Player Init ${this.id}] Ready rejected:`,o),this.player=null,this.playerInitializationPromise=null,i(o)})}catch(r){console.error(`[Player Init ${this.id}] Constructor failed:`,r),this.player=null,this.playerInitializationPromise=null,i(r)}}),this.playerInitializationPromise)}_findPlayerUIElements(){const t=document.querySelector(`${s.selectors.scrollItem}.video-item[data-video-id="${this.id}"]`);if(!t){console.warn(`[Player UI ${this.id}] Video item element not found for ID: ${this.id}.`);return}this.videoWrapperElement=t.querySelector(".video-aspect-wrapper"),this.playPauseButtonElement=t.querySelector(`#playPauseButton-${this.id}`),this.soundButtonElement=t.querySelector(`#soundButton-${this.id}`),this.thumbnailElement=t.querySelector(`#thumbnail-${this.id}`),this.progressBarContainer=t.querySelector(`#progress-container-${this.id}`),this.progressBarFill=t.querySelector(`#progress-fill-${this.id}`),this.currentTimeDisplayElement=t.querySelector(`#current-time-display-${this.id}`)}_resetPlayerUI(){this.progressBarFill&&(this.progressBarFill.style.width="0%"),this.currentTimeDisplayElement&&(this.currentTimeDisplayElement.textContent="0:00")}_attachPlayerListeners(){if(this.player){if(!this.player){console.warn(`[Video ${this.id}] _attachPlayerListeners: Player not initialized, cannot attach listeners.`);return}this.player.off("play"),this.player.on("play",this._handlePlay),this.player.off("pause"),this.player.on("pause",this._handlePause),this.player.off("error"),this.player.on("error",this._handleError),this.player.off("timeupdate"),this.player.on("timeupdate",this._handleProgressUpdate),this.player.on("timeupdate",this._handleSimulatedEnd),this.playPauseButtonElement&&!this.playPauseButtonElement._listenerAttachedClick&&(this.playPauseButtonElement.addEventListener("click",()=>{this.togglePlayPause()}),this.playPauseButtonElement._listenerAttachedClick=!0),this.soundButtonElement&&!this.soundButtonElement._listenerAttachedClick&&(this.soundButtonElement.addEventListener("click",()=>{this.toggleSound()}),this.soundButtonElement._listenerAttachedClick=!0),this.progressBarContainer&&!this.progressBarContainer._seekListenerAttached&&(this.progressBarContainer.addEventListener("click",this._handleSeekClick),this.progressBarContainer._seekListenerAttached=!0)}}_handlePlay=()=>{this.thumbnailElement&&this.thumbnailElement.classList.add("thumbnail-hidden"),this.isEnding=!1};_handlePause=()=>{this.thumbnailElement&&this.hasPlayedOnce?this.thumbnailElement.classList.remove("thumbnail-hidden"):this.thumbnailElement&&this.thumbnailElement.classList.add("thumbnail-hidden")};_handleError=t=>{console.error(`[Player ${this.id}] Error Event:`,t.name,t.message)};_handleProgressUpdate=t=>{if(t){if(this.progressBarFill&&this.duration>0){const i=(t.percent*100).toFixed(2);this.progressBarFill.style.width=`${i}%`}this.currentTimeDisplayElement&&(typeof T=="function"?this.currentTimeDisplayElement.textContent=T(t.seconds):console.error(`[TimeUpdate ${this.id}] formatTime function is not available!`))}};_handleSimulatedEnd=t=>{if(!t||!this.duration)return;const i=t.seconds,n=this.duration-this.timeupdateThreshold;if(i>=n&&!this.isEnding){this.isEnding=!0,this.hasPlayedOnce=!0,this.progressBarFill&&(this.progressBarFill.style.width="100%"),this.currentTimeDisplayElement&&typeof T=="function"&&(this.currentTimeDisplayElement.textContent=T(this.duration));const r=this.playPauseButtonElement,o=r?.querySelector(".icon-play-wrapper"),a=r?.querySelector(".icon-pause-wrapper");this.player&&this.player.pause().catch(l=>console.warn(`Pause error on timeupdate: ${l.name}`)),r&&o&&a?(o.classList.remove("is-hidden"),a.classList.add("is-hidden"),r.setAttribute("aria-label","Play")):console.warn(`[Player ${this.id}] Could not find button/icons on simulated end.`)}else this.isEnding&&this.duration>0&&i<n-.05&&(this.isEnding=!1)};_handleSeekClick=t=>{if(!this.duration||!this.player||!this.progressBarContainer)return;const i=this.progressBarContainer.getBoundingClientRect(),n=t.clientX-i.left,r=this.progressBarContainer.offsetWidth;if(r>0){const o=Math.max(0,Math.min(n/r,1)),a=this.duration*o;this.isEnding=!1,this.hasPlayedOnce=!1,this.player.setCurrentTime(a).then(()=>{this.progressBarFill&&(this.progressBarFill.style.width=`${(o*100).toFixed(2)}%`),this.currentTimeDisplayElement&&(this.currentTimeDisplayElement.textContent=T(a)),this.thumbnailElement&&this.thumbnailElement.classList.add("thumbnail-hidden")}).catch(l=>console.warn(`[Player ${this.id}] Seek failed: ${l.name}`))}};_updatePlayPauseButtonUI=t=>{if(!this.playPauseButtonElement)return;const i=this.playPauseButtonElement.querySelector(".icon-play-wrapper"),n=this.playPauseButtonElement.querySelector(".icon-pause-wrapper");i.classList.toggle("is-hidden",!t),n.classList.toggle("is-hidden",t),this.playPauseButtonElement.setAttribute("aria-label",t?"Play":"Pause")};_updateSoundButtonUI=t=>{if(!this.soundButtonElement)return;const i=this.soundButtonElement.querySelector(".icon-volume-on-wrapper");this.soundButtonElement.querySelector(".icon-volume-off-wrapper").classList.toggle("is-hidden",!t),i.classList.toggle("is-hidden",t),this.soundButtonElement.setAttribute("aria-label",t?"Unmute":"Mute")};updateVideoSizes(t){this.aspectRatio>0&&t>0?(this.videoWidth=t,this.videoHeight=t/this.aspectRatio):(this.videoWidth=0,this.videoHeight=0)}async togglePlayPause(){let t;try{t=await this.initializePlayer()}catch(l){console.error(`[Toggle Play ${this.id}] Player init failed: ${l.message}`);return}if(!document.getElementById(`iframe-${this.id}`)?.closest(s.selectors.scrollItem)?.classList.contains(s.selectors.activeScrollItemClass)){console.warn(`[Toggle Play ${this.id}] Ignoring click: Not active item.`);return}const r=this.playPauseButtonElement,o=r?.querySelector(".icon-play-wrapper"),a=r?.querySelector(".icon-pause-wrapper");if(!r||!o||!a){console.error(`[Toggle Play ${this.id}] Button or Icon wrappers not found! Query: #playPauseButton-${this.id}`);return}try{const l=await t.getPaused(),c=this.isEnding||this.hasPlayedOnce;if(l){if(this.hasPlayedOnce=!1,this.isEnding=!1,c&&this.duration>0)try{await t.setCurrentTime(0),this.progressBarFill&&(this.progressBarFill.style.width="0%")}catch{}await t.play(),this._updatePlayPauseButtonUI(!1)}else await t.pause(),this._updatePlayPauseButtonUI(!0)}catch(l){console.error(`[Toggle Play ${this.id}] API error:`,l.name),this._updatePlayPauseButtonUI(!0)}}async toggleSound(){try{await this.initializePlayer(),ue()}catch(t){console.warn(`[Toggle Sound ${this.id}] Player not ready: ${t.message}`)}}}let v=[];async function Pe(){v=Te(),Be(v),Le(G),v&&v.length>0&&v.forEach(e=>{e.initializePlayer().catch(t=>console.warn(`Init ${e.id} fail: ${t.message}`))}),Ee(v)}function Te(){const e=G.map(t=>new Ie(t));return K(e),e}function K(e){const t=$e();e.forEach(i=>{i.updateVideoSizes(t)})}function Be(e){let t="";e||(e=[]);const i=s.selectors.scrollItem.substring(1);t+=`
        <div class="${i} intro-section text-section" id="intro-section">
            <div class="intro-content">
                <div class="intro-column">
                    <div class="info-block">
                        <h2 class="intro-line">STUDIO DARE</h2>
                        <h2 class="intro-line">SELECTED WORK</h2>
                        <h2 id="current-date-display" class="date-display intro-line"></h2>
                        <div class="intro-line intro-arrow-container">
                            <h3>SCROLL TO VIEW</h3>
                            <svg class="icon intro-arrow-icon" id="intro-scroll-arrow" aria-hidden="true">
                                <use xlink:href="#icon-arrow-down"></use>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `,e.forEach(o=>{const a=o.iframeSrc,l=o.thumbnailUrl?`<img src="${o.thumbnailUrl}" class="video-thumbnail" id="thumbnail-${o.id}" alt="${o.title||"Video thumbnail"}">`:"",c='<svg class="icon icon-play"><use xlink:href="#icon-play"></use></svg>',u='<svg class="icon icon-pause"><use xlink:href="#icon-pause"></use></svg>',f='<svg class="icon icon-volume-off"><use xlink:href="#icon-volume-off"></use></svg>',h='<svg class="icon icon-volume-on"><use xlink:href="#icon-volume-on"></use></svg>',g=`
            <div class="progress-bar-container" id="progress-container-${o.id}">
                <div class="progress-bar-fill" id="progress-fill-${o.id}"></div>
            </div>
            <div class="video-time-display" id="current-time-display-${o.id}">0:00</div>
        `;t+=`
            <div class="${i} video-item" data-video-id="${o.id}">
                    <div class="video-aspect-wrapper" id="video-wrapper-${o.id}">
                        ${l}
                        <iframe src="${a}" id="iframe-${o.id}" ...></iframe>
                        <div class="video-controls">
                            <button class="controls-button play-pause-button" id="playPauseButton-${o.id}" aria-label="Play">
                                <span class="button-icon-wrapper icon-play-wrapper">${c}</span>
                                <span class="button-icon-wrapper icon-pause-wrapper is-hidden">${u}</span>
                            </button>
                            ${g}
                            <button class="controls-button sound-button" id="soundButton-${o.id}" aria-label="Unmute">
                                <span class="button-icon-wrapper icon-volume-off-wrapper">${f}</span>
                                <span class="button-icon-wrapper icon-volume-on-wrapper is-hidden">${h}</span>
                            </button>
                        </div>
                    </div>
                    <div class="video-info-overlay" id="video-info-${o.id}">
                        <h3 class="video-info-title">${o.title||"Untitled"}</h3>
                        <p class="video-info-year">${o.year||""}</p>
                    </div>
            </div>
        `}),t+=`
        <div class="${i} outro-section text-section" id="outro-section">
            <div class="outro-content">
                <h2 class="outro-line">AT STUDIO DARE<br>WE MAKE FUN AND THOUGHTFUL THINGS<br>AND WE LIKE HAIKUS</h2>
                <h3 class="outro-line">Our expertise spans design, animation, live-action direction, photography, and creative direction for film, television, commercials, branding, and media content. We believe thoughtful design and storytelling can make the world a better placeâ€”and we bring our best every time we get the chance to prove it.</h3>
      <h3 class="outro-line"><a href="mailto:studio@hellodare.com" class="email-link" target="_blank" rel="noopener noreferrer">studio@hellodare.com</a></h3>
            </div>
        </div>
    `;const n=document.querySelector(s.selectors.track);if(!n){console.error(`renderVideos: '${s.selectors.track}' not found.`);return}n.innerHTML=t,document.getElementById(s.selectors.introSectionId.substring(1)),e.forEach(o=>{const a=o.id,l=n.querySelector(`.video-item[data-video-id="${a}"]`);if(!l){console.error(`Failed to find video item ${a}`);return}l.style.position="relative";const c=l.querySelector(".video-aspect-wrapper");c&&o.nativeWidth>0&&o.nativeHeight>0&&(c.style.aspectRatio=`${o.nativeWidth}/${o.nativeHeight}`),U(l,!0,o)});const r=document.getElementById(s.selectors.infoSectionId.substring(1));r&&U(r,!1)}function $e(){const e=document.querySelector(s.selectors.middleColumn);return e?e.clientWidth:window.innerWidth}function L(e){const t=document.querySelector(`${s.selectors.scrollItem}.video-item[data-video-id="${e}"]`);if(!t)return;const i=t.querySelector(".video-aspect-wrapper"),n=t.querySelector(".video-info-overlay");if(!i||!n||t.offsetHeight===0)return;n.style.position="absolute";const r=s.layout.overlayOffsetBottom,o=i.offsetTop+i.offsetHeight/2+r;n.style.top=`${o}px`;const a=i.offsetLeft-i.offsetWidth/2;n.style.left=`${a}px`,n.style.width=`${i.offsetWidth}px`,n.style.maxWidth="100%"}function Le(e){const t=document.getElementById("main-navigation");if(!t){console.error("Navigation container #main-navigation not found.");return}let i='<ul class="nav-link-list">';e.forEach((n,r)=>{const o=r+1;i+=`<li><a href="#" class="nav-link" data-index="${o}">${Z(o)}<span class="nav-space"></span>${n.titleShortName||`Video ${o}`}</a></li>`}),i+="</ul>",t.innerHTML=i,_e(t)}function _e(e,t){const i=e.querySelector(".nav-link-list");i&&i.addEventListener("click",n=>{const r=n.target.closest(".nav-link");if(r){n.preventDefault();const o=parseInt(r.dataset.index,10);if(!isNaN(o)&&typeof E=="function"&&(E(o),_()&&(document.getElementById(s.selectors.navigationContainerId),typeof $=="function"))){$();const a=document.querySelector(".scroll-item.active-scroll-item");a&&N(a)}}})}function ke(){K(v),v&&v.length>0&&v.forEach(e=>{L(e.id)})}document.addEventListener("DOMContentLoaded",async()=>{document.body.classList.add("no-transition"),Me(),await Ce();try{if(await Pe(),typeof gsap<"u"){const e=gsap.timeline({defaults:{duration:1.5,ease:"power2.out"}}),t=".left-column",i=".right-column",n=".middle-column",r=".column-content";gsap.set([t,i,n],{y:20}),e.to([t,i],{y:0},0).to(n,{y:0},.2),gsap.to(r,{opacity:1,duration:1.5,ease:"power2.out",delay:.4})}else document.querySelectorAll(".left-column, .right-column, .middle-column").forEach(e=>{e.style.opacity="1",e.style.transform="translateY(0px)"})}catch(e){console.error("ERROR during renderPlaylist or attaching listeners:",e)}Oe(),Ae(),setTimeout(()=>{document.body.classList.remove("no-transition")},50)});function Me(){if(typeof gsap<"u"&&typeof ScrollTrigger<"u"&&typeof CSSPlugin<"u")gsap.registerPlugin(ScrollTrigger,CSSPlugin);else return}async function Ce(){try{const e=await fetch("assets/images/icons.svg");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const t=await e.text(),i=document.createElement("div");i.innerHTML=t;const n=i.querySelector("svg");n&&(n.style.display="none",n.setAttribute("aria-hidden","true"),document.body.insertAdjacentElement("afterbegin",n))}catch(e){console.error("Error loading or injecting SVG sprite:",e)}}function Oe(){const e=document.getElementById("darkModeToggle");if(!e)return;localStorage.getItem("darkMode")==="true"&&document.body.classList.add("dark-mode"),e.addEventListener("click",()=>{const i=document.body.classList.toggle("dark-mode");localStorage.setItem("darkMode",i)})}function Ae(){const e=document.getElementById("current-date-display");if(!e)return;const t=te("MM DD YYYY");e.textContent=t}
